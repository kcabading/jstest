var info={"items":{"c001":{"parent":"c000","title":"Phones"},"c002":{"parent":"c000","title":"Laptops"},"c003":{"parent":"c000","title":"Accessories"},"p001":{"parent":"c001","manufacturer":"Apple","title":"iPhone 10","price":499,"releaseDate":"2018-04-23T18:25:43.511Z"},"p002":{"parent":"c002","manufacturer":"Apple","title":"Macbook Pro 2017","price":1999,"releaseDate":"2017-04-23T18:25:43.511Z"},"p003":{"parent":"c002","manufacturer":"Dell","title":"XPS 13","price":1399,"releaseDate":"2017-04-23T18:25:43.511Z"},"p004":{"parent":"c001","manufacturer":"Samsung","title":"Samsung Galaxy S10","price":399,"releaseDate":"2017-04-23T18:25:43.511Z"},"p005":{"parent":"c003","manufacturer":"Apple","title":"Apple Charger 12W","price":99,"releaseDate":"2016-12-23T18:25:43.511Z"},"p006":{"parent":"c003","manufacturer":"Samsung","title":"Samsung Charger 12W","price":89,"releaseDate":"2017-04-23T18:25:43.511Z"}}}
var objCategoryList={};var arProductList=[];Object.keys(info.items).forEach(function(key){var strFirstChar=key.charAt(0)
if(strFirstChar==='c'){objCategoryList[key]=Object.assign(info.items[key],{products:[]})}else if(strFirstChar==='p'){arProductList.push(info.items[key])}});arProductList.forEach(function(item){if(objCategoryList.hasOwnProperty(item.parent)){objCategoryList[item.parent].products.push({title:item.title,manufacturer:item.manufacturer,price:item.price,releaseDate:new Date(item.releaseDate).getFullYear()})}else{}})
var strHtmlContent="";Object.keys(objCategoryList).forEach(function(key){strHtmlContent+=buildCategoryListDisplay(objCategoryList[key])})
function buildCategoryListDisplay(categoryList){var productsListHtml=""
categoryList.products.forEach(function(item){productsListHtml+=`<div class="item"><div class="item-name"><h3>${item.title}</h3></div><div class="item-body"><div class="row"><div class="col-sm-8"><div class="item-picture"><img src="75x75.png"/></div><div class="item-details"><p>${item.manufacturer+" to be released in "+item.releaseDate}</p></div></div><div class="col-sm-4"><button class="price">$${item.price}</button></div></div></div></div>`;})
return`<div class="item-category"><h4>${categoryList.title}</h4><div class="item-list">${productsListHtml}</div></div>`;}
document.getElementById("content").innerHTML+=strHtmlContent;